<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <wc-navbar></wc-navbar>
  <main class="container">
    保存済みのデータ一覧（すでにローカルストレージに値が存在する場合は初期表示されます。）<br />
    <table border="1">
      <thead>
        <tr><th>key</th><th>value</th></tr>
      </thead>
      <tbody id="tbody"></tbody>
    </table>
    <hr />
    ローカルストレージに保存したい値<br />
    key: <input type="text" id="inputKey" /> value: <input type="text" id="inputValue" />
    <button onclick="save();">セーブ</button>
    <button onclick="load();">ロード</button>
    <button onclick="remove();">削除</button>
    <button onclick="clear();">全件クリア</button>
  </main>
  <script>
    function save(){
      const key = document.getElementById("inputKey").value;
      const value = document.getElementById("inputValue").value;
      localStorage.setItem(key, value);
      load();
    }
    function load(){
      let key, value, row;
      const tbody = document.getElementById("tbody");
      tbody.innerHTML = '';
      for(let i = 0; i < localStorage.length; i++){
        key = localStorage.key(i);
        value = localStorage.getItem(key);
        row = tbody.insertRow();
        row.insertCell().innerText = key;
        row.insertCell().innerText = value;
      }
    }
    function remove(){
      const key = document.getElementById("inputKey").value;
      localStorage.removeItem(key);
      load();
    }
    function clear(){
      localStorage.clear();
      load();
    }
    window.onload = load();
    window.addEventListener("storage", (event) =>{
      console.log("key:" + event.key);
      console.log("oldValue:" + event.oldValue);
      console.log("newValue:" + event.newValue);
      console.log("url:" + event.url);
      console.log("storageArea:" + event.storageArea);
    })
  </script>
</body>
</html>